#!/bin/bash

# Run vgrep but discard the output
# Then start an interactive vgrep session
ivgrep()
{
  vgrep "$1" > /dev/null
  vgrep --interactive
}

# Do not exclude gitignored directories
ivgrep-all()
{
  vgrep --no-index "$1" > /dev/null
  vgrep --interactive
}

# Remove entire line from file
# by writing to a new file
# then moving it back
remove-line(){
    files=$(grep -rl "$1" .)
    if [ -z "$files" ]; then
      echo "Pattern not found: $1"
      echo "In file: $2"
    else
      grep -vwE "$1" "$2" > "$2".tmp
      mv "$2".tmp "$2"
    fi
}

find-replace(){
  sd $1 $2 $(grep -rl "$1" .)
}

# Makes a shell script executable
# according to git
make-executable(){
  chmod u+x "$1"
}


# Copy to system clipboard
cp-to-clipboard(){
  "$@" | xclip -selection clipboard
}

# Find running app
ps-app(){
  ps -aux | grep "$1" | awk '{print $2, substr($0, index($0, $11))}'
}

generate-ctags(){
  mkdir -p $HOME/.ctags
  ctags -f $HOME/.ctags/tags --recurse=yes --exclude=.git $PWD
}

vpf(){
  vim -p $(fd $1)
}
